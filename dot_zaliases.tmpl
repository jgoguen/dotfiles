# vim: set filetype=zsh:
# Do not edit this file directly! It is managed by chezmoi.

{{ if ne .chezmoi.os "openbsd" -}}
alias egrep="egrep --color=auto"
alias fgrep="fgrep --color=auto"
alias find="find -L"
alias grep="grep --color=auto"
{{- end }}

alias focusfix='printf "\e[?1004l"'

if command -v dig >/dev/null 2>&1; then
	alias ip4="dig +short -4 myip.opendns.com @resolver1.opendns.com"
	alias ip6="dig +short -6 -t AAAA myip.opendns.com @resolver1.opendns.com"
fi

alias less="less -FRXd"
{{ if eq .chezmoi.os "darwin" -}}
alias pgrep="pgrep -fli"
{{- else }}
alias pgrep="pgrep -fl"
{{- end }}
alias please='{{ if eq .chezmoi.os "openbsd" }}doas{{ else }}sudo{{ end }} $(fc -ln -1)'
alias sort="LC_ALL=C sort"

{{ if eq .chezmoi.os "darwin" -}}
alias flushdns="dscacheutil -flushcache && sudo killall -HUP mDNSResponder"
alias update='sudo softwareupdate -i -a; brew update; brew upgrade; brew cleanup;'
{{- else if eq .chezmoi.osRelease.id "fedora" }}
alias update='sudo dnf upgrade --refresh -y; test -x flatpak && flatpak update -y; test -x snap && sudo snap refresh; test -x fwupdmgr && fwupdmgr update;'
{{- else if eq .chezmoi.osRelease.id "arch" }}
alias update='sudo pacman -Syyu --noconfirm; test -x flatpak && flatpak update -y; test -x snap && sudo snap refresh; test -x fwupdmgr && fwupdmgr update;'
{{- end }}

if command -v python3 >/dev/null 2>&1; then
	alias urldecode='python3 -c "import sys, urllib.parse as ul; print(ul.unquote_plus(sys.argv[1]))"'
	alias urlencode='python3 -c "import sys, urllib.parse as ul; print(ul.quote_plus(sys.argv[1]))"'
fi

{{ if eq .chezmoi.os "linux" -}}
if command -v gio >/dev/null 2>&1; then
	alias open="gio open"
elif command -v xdg-open >/dev/null 2>&1; then
	alias open="${XDG_OPEN_BIN}"
fi

if command -v xclip >/dev/null 2>&1; then
	alias pbcopy="xclip -selection clipboard"
	alias pbpaste="xclip -selection clipboard -o"
fi
{{- end }}

{{ if ne .chezmoi.os "openbsd" -}}
if command -v docker >/dev/null 2>&1; then
	alias dcips={{`$'docker inspect -f \'{{.Name}}-{{range  $k, $v := .NetworkSettings.Networks}}{{$k}}-{{.IPAddress}} {{end}}-{{range $k, $v := .NetworkSettings.Ports}}{{ if not $v }}{{$k}} {{end}}{{end}} -{{range $k, $v := .NetworkSettings.Ports}}{{ if $v }}{{$k}} => {{range . }}{{ .HostIp}}:{{.HostPort}}{{end}}{{end}} {{end}}\' $(docker ps -aq) | column -t -s-'`}}
fi
{{- end }}

if command -v thefuck >/dev/null 2>&1; then
	eval $(thefuck --alias)
fi

if command -v bat >/dev/null 2>&1; then
	alias cat='bat'
fi

if command -v procs >/dev/null 2>&1; then
	eval $(procs --gen-completion-out zsh)
fi

if command -v lsd >/dev/null 2>&1; then
	alias ls='lsd'
	if ! command -v tree >/dev/null 2>&1; then
		alias tree="lsd --tree"
	fi
else
{{- if eq .chezmoi.os "linux" }}
	alias ls="ls --color=auto -Fh"
{{- else }}
	alias ls="ls -Fh"
{{- end }}
fi

if [ -n "${KITTY_WINDOW_ID}" ] && [ -n "$(command -v kitten || true)" ]; then
	alias ssh="kitten ssh"
fi

if [ -f "${HOME}/.zaliases.local" ]; then
	. "${HOME}/.zaliases.local"
fi
