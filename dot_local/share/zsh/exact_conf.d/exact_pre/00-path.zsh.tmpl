# vim: set filetype=sh:
# Do not edit this file directly! It is managed by chezmoi.

# Set path first, so many other things depend on it
typeset -U path
typeset -aU path_dirs
path_dirs=(
	/bin
	/sbin
	/usr/bin
	/usr/sbin
	/usr/local/bin
	/usr/local/sbin
	/var/lib/snapd/snap/bin
	/usr/local/go/bin
	/usr/local/nodejs/current/bin
	/opt/local/bin
	/opt/local/sbin
	/opt/homebrew/bin
	"${HOME}/.cargo/bin"
	"${HOME}/.dotnet/tools"
	"${HOME}/bin"
	"${HOME}/.local/bin"
)

for bindir in "${path_dirs[@]}"; do
	if [ -r "${bindir}" ] && [ -x "${bindir}" ]; then
		path=("${bindir}" ${path})
	fi
done

if [ -f '/opt/google-cloud-sdk/completion.zsh.inc' ]; then
	source '/opt/google-cloud-sdk/completion.zsh.inc'
fi
if [ -f '/opt/google-cloud-sdk/path.zsh.inc' ]; then
	source '/opt/google-cloud-sdk/path.zsh.inc'
fi

# Add paths for languages
# Add Go paths
# {{- if eq .chezmoi.os "darwin" }}
export GOPATH="${HOME}/Library/Application Support/go"
{{- else }}
export GOPATH="${XDG_STATE_HOME}/go"
{{- end }}
while read -d ':' pathname || [ -n "${pathname}" ]; do
	if [ -r "${pathname}/bin" ] && [ -x "${pathname}/bin" ]; then
		path=(${pathname}/bin ${path})
	elif [ ! -d "${pathname}" ]; then
		/usr/bin/install -d -m 0700 "${pathname}"
	fi
done < <(printf '%s' "${GOPATH}")

export PATH

if command -v clang >/dev/null 2>&1; then
	export CC="$(command -v clang)"
fi

if command -v nvim >/dev/null 2>&1; then
	export EDITOR="$(command -v nvim)"
elif command -v vim >/dev/null 2>&1; then
	export EDITOR="$(command -v vim)"
else
	export EDITOR=vi
fi
export VISUAL="${EDITOR:-vi}"

MAN_BIN="$(command -v manpath)"
if command -v manpath >/dev/null 2>&1 && [ -z "${MANPATH}" ]; then
	MANPATH="${XDG_DATA_HOME}/man:/opt/local/share/man:$(command manpath 2>/dev/null)"
	export MANPATH
fi
