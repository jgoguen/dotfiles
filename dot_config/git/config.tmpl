# vim: set noexpandtab tabstop=2 shiftwidth=2 autoindent:
# Do not edit this file directly! It is managed by chezmoi.

[alias]
	amend = commit --amend -a --no-edit
	branches = branch -a
	discard = reset --hard HEAD
	lg = log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit
	remotes = remote -v
	smartlog = log --graph --pretty=format:'%C(yellow)%h%Creset %an <%ae> %Cgreen%cr%Creset%C(cyan)%d%Creset %n%s%n' --abbrev-commit --date=relative
	sl = smartlog

[apply]
	whitespace = fix

[blame]
	date = iso-local

[branch]
	autosetuprebase = always
	autosetupmerge = true

[color]
	ui = true

[color "branch"]
	current = yellow reverse
	local = yellow
	remote = green

[color "diff"]
	frag = magenta bold
	meta = yellow bold
	new = green bold
	old = red bold
	whitespace = red reverse

[color "status"]
	added = yellow
	changed = green
	untracked = cyan

[column]
	ui = auto

[commit]
	gpgSign = {{ if eq .environment "personal" }}true{{ else }}false{{ end }}

[core]
	editor = nvim
	eol = lf
	quotePath = true
	untrackedCache = true
	whitespace = fix,-cr-at-eol,-indent-with-non-tab,space-before-tab,-tab-in-indent,trailing-space

[diff]
	algorithm = patience
	noprefix = true
	renames = copies

[fetch]
	prune = true
	recurseSubmodules = on-demand

[format]
	pretty = %Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%ch)%Creset: %C(bold blue)%aN <%aE>%Creset
	graph = true

[gc]
	auto = 1

[github]
	user = {{ index (onepassword "yaim2h545jdgdfvlepphtyql3i").fields 0 "value" }}
	token = {{ index (onepassword "yaim2h545jdgdfvlepphtyql3i").fields 21 "value" }}

[gpg]
{{- if eq .chezmoi.os "darwin" }}
	program = /usr/local/bin/gpg
{{- else }}
	program = /usr/bin/gpg
{{- end }}

[gpg "openpgp"]
{{- if eq .chezmoi.os "darwin" }}
	program = /usr/local/bin/gpg
{{- else }}
	program = /usr/bin/gpg2
{{- end }}

[gpg "ssh"]
	allowedSignersFile = ~/.config/git/allowed_signers
{{- if eq .chezmoi.os "darwin" }}
	program = "/Applications/1Password.app/Contents/MacOS/op-ssh-sign"
{{- else }}
	program = /usr/bin/op-ssh-sign
{{- end }}

[grep]
	lineNumber = true
	patternType = perl

[help]
	autocorrect = 1

[i18n]
	commitEncoding = utf-8
	logOutputEncoding = utf-8

[init]
	defaultBranch = main

[log]
	abbrev-commit = true
	date = iso-local
	decorate = auto

[merge]
	conflictstyle = diff3
	status = true
	summary = true

[pull]
	rebase = true

[push]
	default = simple
	gpgSign = if-asked

[rebase]
	autosquash = true
	autostash = true

[stash]
	showPatch = true

[status]
	showStash = true
	submoduleSummary = true

[tag]
	forceSignAnnotated = true
	gpgSign = true

[include]
	path = ~/.config/git/config.local
